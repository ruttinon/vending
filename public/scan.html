<!DOCTYPE html>
<html lang="th">
<head>
<<<<<<< HEAD
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πâ‡∏≤</title>
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<style>
    body {
      font-family: 'Arial', sans-serif;
      background-image: url('image/blue.png'); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
      background-size: cover;
      background-position: center;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    h1 {
      font-size: 3rem;
      color: #00e4b2;
      margin-bottom: 30px;
      font-weight: bold;
      text-transform: uppercase;
      text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.5); /* ‡πÄ‡∏á‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
    }
    p {
      font-size: 1.3rem;
      margin-bottom: 30px;
      color: #ffffff;
      text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.5); /* ‡πÄ‡∏á‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
    }
    /* ‡∏õ‡∏∏‡πà‡∏° */
    .scan-btn {
      font-size: 1.5em;
      padding: 15px 30px;
      background-color: #0d6efd;
      color: white;
      border: none;
      border-radius: 50px;
      box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      text-transform: uppercase;
      margin-top: 30px;
      width: 80%;
    }
    .scan-btn:hover {
      background-color: #0b5ed7;
    }
    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ */
    video {
      width: 90%;
      height: auto;
      margin-top: 30px;
      border-radius: 10px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô */
    #resultMessage {
      display: none;
      font-size: 2.5em;
      color: black;
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      z-index: 9999;
    }
    /* ‡πÄ‡∏û‡∏¥‡πà‡∏° Media Query ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å */
    @media (max-width: 768px) {
      video {
        width: 100%;
      }
    }
</style>
</head>
<body>
<h1>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πâ‡∏≤</h1>
<p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ó‡πâ‡∏≤</p>
<!-- ‡∏Å‡∏•‡πâ‡∏≠‡∏á -->
<div class="d-flex justify-content-center">
<video id="video" autoplay></video>
</div>
<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πÅ‡∏Å‡∏ô -->
<button class="scan-btn" onclick="startScan()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô</button>
<!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô -->
<div id="resultMessage">
    ‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: <span id="scanResult"></span>
</div>
<script>
    let videoElement = document.getElementById("video");
=======
  <meta charset="UTF-8">
  <title>‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πâ‡∏≤</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding-top: 100px;
      background-color: #f4f4f4;
    }
    .info {
      font-size: 1.2em;
      color: #444;
    }
    .scan-btn {
      font-size: 1.2em;
      padding: 15px 30px;
      margin-top: 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
    }
    .scan-btn:hover {
      opacity: 0.85;
    }
    video {
      width: 80%;
      height: auto;
      margin-top: 20px;
      border: 2px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>ü¶∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πâ‡∏≤</h1>
  <p class="info">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ó‡πâ‡∏≤</p>

  <button class="scan-btn" onclick="startScan()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô</button>
  <video id="video" autoplay></video>

  <script>
    let videoElement = document.getElementById("video");

>>>>>>> f8ae43cd7cdb60f9367994b0ed4151e06f3845ec
    function startCamera() {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
          videoElement.srcObject = stream;
        })
        .catch(function (err) {
          console.error("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á:", err);
          alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ");
        });
    }
<<<<<<< HEAD
    function startScan() {
      startCamera();
      setTimeout(() => {
        const canvas = document.createElement('canvas');
        canvas.width = videoElement.videoWidth || 640;  // Default width if videoWidth is 0
        canvas.height = videoElement.videoHeight || 480; // Default height if videoHeight is 0
        const context = canvas.getContext('2d');
        context.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
        const imageData = canvas.toDataURL('image/png');  // Capture image in base64 format
=======

    function startScan() {
      startCamera();

      setTimeout(() => {
        const canvas = document.createElement('canvas');
        canvas.width = videoElement.videoWidth;
        canvas.height = videoElement.videoHeight;
        const context = canvas.getContext('2d');
        context.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
        const imageData = canvas.toDataURL('image/png');

>>>>>>> f8ae43cd7cdb60f9367994b0ed4151e06f3845ec
        if (!imageData) {
          alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ");
          return;
        }
<<<<<<< HEAD
        // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û
        let stream = videoElement.srcObject;
        let tracks = stream.getTracks();
        tracks.forEach(track => track.stop());  // Stop the video stream after capturing the image
        // Save the captured image in localStorage
        localStorage.setItem("capturedImage", imageData);  // Save image to localStorage
=======

        // ‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
>>>>>>> f8ae43cd7cdb60f9367994b0ed4151e06f3845ec
        fetch('http://localhost:5001/scan', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ image: imageData })
        })
<<<<<<< HEAD
        .then(response => response.json())
        .then(data => {
          if (data.label && data.confidence !== undefined) {
            localStorage.setItem("footLabel", data.label);
            localStorage.setItem("footConfidence", data.confidence);
            document.getElementById('resultMessage').style.display = 'block';
            document.getElementById('scanResult').innerText = `${data.label} (${data.confidence.toFixed(2)}%)`;
            setTimeout(() => {
              window.location.href = "foot-analysis.html"; // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ foot-analysis.html
            }, 5000);
=======
        .then(response => {
          if (!response.ok) {
            return response.text().then(text => { throw new Error(text); });
          }
          return response.json();
        })
        .then(data => {
          if (data.label && data.confidence !== undefined) {
            alert(`‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ${data.label} (${data.confidence.toFixed(2)}%)`);
          } else if (data.error) {
            alert("‚ùå ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö AI: " + data.error);
>>>>>>> f8ae43cd7cdb60f9367994b0ed4151e06f3845ec
          } else {
            alert("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ");
          }
        })
        .catch(err => {
<<<<<<< HEAD
          console.error("‚ùå Scan error:", err.message);
          alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:\n" + err.message);
        });
      }, 2000);  // Delay to ensure camera starts properly
    }
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î
    window.onload = startCamera;
</script>
=======
          console.error("Scan error:", err.message);
          alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:\n" + err.message);
        });
      }, 2000);
    }
  </script>
>>>>>>> f8ae43cd7cdb60f9367994b0ed4151e06f3845ec
</body>
</html>
